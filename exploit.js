const axios = require('axios');
const cheerio = require('cheerio');

const registrationUrl = 'https://www.njuskalo.hr/registracija/kupac';

// Данные для регистрации
const registrationData = {
    name: 'podsoshuysosalvopros',                  // Замените на ваше имя
    surname: 'huysosal',           // Замените на вашу фамилию
    email: 'yavashirtyvzla',   // Замените на ваш email
    password: 'your_password',          // Замените на ваш пароль
    // Добавьте другие необходимые поля в зависимости от формы
};

// Функция для выполнения регистрации
async function register() {
    try {
        // Получаем страницу для промежуточного запроса на получение CSRF-токена или других данных (если необходимо)
        const response = await axios.get(registrationUrl);
        
        // Исключите этот шаг, если нет необходимости в токенах/или других скрытых полях
        const $ = cheerio.load(response.data);
        
        // Например, если есть CSRF-токен, его нужно извлечь
        // const csrfToken = $('input[name="csrf_token"]').val();
        // registrationData['csrf_token'] = csrfToken; 

        // Отправляем запрос на регистрацию
        const registrationResponse = await axios.post(registrationUrl, registrationData);

        if (registrationResponse.status === 200) {
            console.log('Регистрация прошла успешно!');
        } else {
            console.log('Ошибка при регистрации:', registrationResponse.status);
        }
    } catch (error) {
        console.error('Ошибка при выполнении запроса:', error);
    }
}

// Запускаем регистрацию
register();
